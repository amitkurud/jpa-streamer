<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="sv"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>InternalTerminalOperationFactory.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Pipeline - Standard</a> &gt; <a href="index.source.html" class="el_package">com.speedment.jpastreamer.pipeline.standard.internal.terminal</a> &gt; <span class="el_source">InternalTerminalOperationFactory.java</span></div><h1>InternalTerminalOperationFactory.java</h1><pre class="source lang-java linenums">package com.speedment.jpastreamer.pipeline.standard.internal.terminal;

import com.speedment.jpastreamer.pipeline.terminal.TerminalOperation;
import com.speedment.jpastreamer.pipeline.terminal.TerminalOperationFactory;
import com.speedment.jpastreamer.pipeline.terminal.TerminalOperationType;

import java.util.Comparator;
import java.util.Iterator;
import java.util.Optional;
import java.util.Spliterator;
import java.util.function.*;
import java.util.stream.BaseStream;
import java.util.stream.Collector;
import java.util.stream.Stream;

import static java.util.Objects.requireNonNull;

<span class="fc" id="L18">public class InternalTerminalOperationFactory implements TerminalOperationFactory {</span>

<span class="fc" id="L20">    private static final TerminalOperation&lt;Stream&lt;Object&gt;, Object[]&gt; TO_ARRAY = new ApplyTerminalOperation&lt;&gt;(</span>
            TerminalOperationType.TO_ARRAY,
            Stream.class,
            Object[].class,
            Stream::toArray);

<span class="fc" id="L26">    private static final TerminalOperation&lt;Stream&lt;Object&gt;, Optional&lt;?&gt;&gt; FIND_FIRST = new ApplyTerminalOperation&lt;&gt;(</span>
            TerminalOperationType.FIND_FIRST,
            Stream.class,
            Optional.class,
            Stream::findFirst);

<span class="fc" id="L32">    private static final TerminalOperation&lt;Stream&lt;Object&gt;, Optional&lt;?&gt;&gt; FIND_ANY = new ApplyTerminalOperation&lt;&gt;(</span>
            TerminalOperationType.FIND_ANY,
            Stream.class,
            Optional.class,
            Stream::findAny);

<span class="fc" id="L38">    private static final TerminalOperation&lt;Stream&lt;Object&gt;, Long&gt; COUNT = new ApplyAsLongTerminalOperation&lt;&gt;(</span>
            TerminalOperationType.COUNT,
            Stream.class,
            long.class,
            Stream::count);

<span class="fc" id="L44">    private static final TerminalOperation&lt;Stream&lt;Object&gt;, Iterator&lt;Object&gt;&gt; ITERATOR = new ApplyTerminalOperation&lt;&gt;(</span>
            TerminalOperationType.ITERATOR,
            Stream.class,
            Iterator.class,
            Stream::iterator);

<span class="fc" id="L50">    private static final TerminalOperation&lt;Stream&lt;Object&gt;, Spliterator&lt;Object&gt;&gt; SPLITERATOR = new ApplyTerminalOperation&lt;&gt;(</span>
            TerminalOperationType.SPLITERATOR,
            Stream.class,
            Spliterator.class,
            Stream::spliterator);


    @Override
    public &lt;T&gt; TerminalOperation&lt;Stream&lt;T&gt;, Void&gt; createForEach(final Consumer&lt;? super T&gt; action) {
<span class="fc" id="L59">        requireNonNull(action);</span>

<span class="fc" id="L61">        return new AcceptTerminalOperation&lt;&gt;(</span>
                TerminalOperationType.FOR_EACH,
                Stream.class,
                void.class,
<span class="fc" id="L65">                stream -&gt; stream.forEach(action),</span>
                action);
    }

    @Override
    public &lt;T&gt; TerminalOperation&lt;Stream&lt;T&gt;, Void&gt; createForEachOrdered(final Consumer&lt;? super T&gt; action) {
<span class="nc" id="L71">        requireNonNull(action);</span>
<span class="nc" id="L72">        return new AcceptTerminalOperation&lt;&gt;(</span>
                TerminalOperationType.FOR_EACH_ORDERED,
                Stream.class,
                void.class,
<span class="nc" id="L76">                stream -&gt; stream.forEachOrdered(action),</span>
                action);
    }

    @Override
    public &lt;T&gt; TerminalOperation&lt;Stream&lt;T&gt;, Object[]&gt; acquireToArray() {
<span class="nc" id="L82">        return typed(TO_ARRAY);</span>
    }

    @Override
    public &lt;T, A&gt; TerminalOperation&lt;Stream&lt;T&gt;, A[]&gt; createToArray(final IntFunction&lt;A[]&gt; generator) {
<span class="nc" id="L87">        requireNonNull(generator);</span>
<span class="nc" id="L88">        return new ApplyTerminalOperation&lt;&gt;(</span>
                TerminalOperationType.TO_ARRAY,
                Stream.class,
                Object[].class,
<span class="nc" id="L92">                (Stream&lt;T&gt; stream) -&gt; stream.toArray(generator),</span>
                generator);
    }

    @Override
    public &lt;T&gt; TerminalOperation&lt;Stream&lt;T&gt;, T&gt; createReduce(final T identity, final BinaryOperator&lt;T&gt; accumulator) {
<span class="nc" id="L98">        requireNonNull(identity);</span>
<span class="nc" id="L99">        requireNonNull(accumulator);</span>
<span class="nc" id="L100">        return new ApplyTerminalOperation&lt;&gt;(</span>
                TerminalOperationType.REDUCE,
                Stream.class,
                Object.class,
<span class="nc" id="L104">                stream -&gt; stream.reduce(identity, accumulator),</span>
                identity, accumulator);
    }

    @Override
    public &lt;T&gt; TerminalOperation&lt;Stream&lt;T&gt;, Optional&lt;T&gt;&gt; createReduce(final BinaryOperator&lt;T&gt; accumulator) {
<span class="nc" id="L110">        requireNonNull(accumulator);</span>
<span class="nc" id="L111">        return new ApplyTerminalOperation&lt;&gt;(</span>
                TerminalOperationType.REDUCE,
                Stream.class,
                Optional.class,
<span class="nc" id="L115">                stream -&gt; stream.reduce(accumulator),</span>
                accumulator);
    }

    @Override
    public &lt;T, U&gt; TerminalOperation&lt;Stream&lt;T&gt;, U&gt; createReduce(final U identity,
                                                               final BiFunction&lt;U, ? super T, U&gt; accumulator,
                                                               final BinaryOperator&lt;U&gt; combiner) {
<span class="nc" id="L123">        requireNonNull(identity);</span>
<span class="nc" id="L124">        requireNonNull(accumulator);</span>
<span class="nc" id="L125">        requireNonNull(combiner);</span>
<span class="nc" id="L126">        return new ApplyTerminalOperation&lt;&gt;(</span>
                TerminalOperationType.REDUCE,
                Stream.class,
                Object.class,
<span class="nc" id="L130">                stream -&gt; stream.reduce(identity, accumulator, combiner),</span>
                identity, accumulator, combiner);
    }

    @Override
    public &lt;T, R&gt; TerminalOperation&lt;Stream&lt;T&gt;, R&gt; createCollect(final Supplier&lt;R&gt; supplier,
                                                                final BiConsumer&lt;R, ? super T&gt; accumulator,
                                                                final BiConsumer&lt;R, R&gt; combiner) {
<span class="nc" id="L138">        requireNonNull(supplier);</span>
<span class="nc" id="L139">        requireNonNull(accumulator);</span>
<span class="nc" id="L140">        requireNonNull(combiner);</span>
<span class="nc" id="L141">        return new ApplyTerminalOperation&lt;&gt;(</span>
                TerminalOperationType.COLLECT,
                Stream.class,
                Object.class,
<span class="nc" id="L145">                stream -&gt; stream.collect(supplier, accumulator, combiner),</span>
                supplier, accumulator, combiner);
    }

    @Override
    public &lt;T, R, A&gt; TerminalOperation&lt;Stream&lt;T&gt;, R&gt; createCollect(final Collector&lt;? super T, A, R&gt; collector) {
<span class="fc" id="L151">        requireNonNull(collector);</span>
<span class="fc" id="L152">        return new ApplyTerminalOperation&lt;&gt;(</span>
                TerminalOperationType.COLLECT,
                Stream.class,
                Object.class,
<span class="nc" id="L156">                stream -&gt; stream.collect(collector),</span>
                collector);
    }

    @Override
    public &lt;T&gt; TerminalOperation&lt;Stream&lt;T&gt;, Optional&lt;T&gt;&gt; createMin(final Comparator&lt;? super T&gt; comparator) {
<span class="nc" id="L162">        requireNonNull(comparator);</span>
<span class="nc" id="L163">        return new ApplyTerminalOperation&lt;&gt;(</span>
                TerminalOperationType.MIN,
                Stream.class,
                Optional.class,
<span class="nc" id="L167">                stream -&gt; stream.min(comparator),</span>
                comparator);
    }

    @Override
    public &lt;T&gt; TerminalOperation&lt;Stream&lt;T&gt;, Optional&lt;T&gt;&gt; createMax(final Comparator&lt;? super T&gt; comparator) {
<span class="nc" id="L173">        requireNonNull(comparator);</span>
<span class="nc" id="L174">        return new ApplyTerminalOperation&lt;&gt;(</span>
                TerminalOperationType.MAX,
                Stream.class,
                Optional.class,
<span class="nc" id="L178">                stream -&gt; stream.max(comparator),</span>
                comparator);
    }

    @Override
    public &lt;T&gt; TerminalOperation&lt;Stream&lt;T&gt;, Long&gt; acquireCount() {
<span class="nc" id="L184">        return typed(COUNT);</span>
    }

    @Override
    public &lt;T&gt; TerminalOperation&lt;Stream&lt;T&gt;, Boolean&gt; createAnyMatch(final Predicate&lt;? super T&gt; predicate) {
<span class="nc" id="L189">        requireNonNull(predicate);</span>
<span class="nc" id="L190">        return new TestTerminalOperation&lt;&gt;(</span>
                TerminalOperationType.ANY_MATCH,
                Stream.class,
                boolean.class,
<span class="nc" id="L194">                stream -&gt; stream.anyMatch(predicate),</span>
                predicate);
    }

    @Override
    public &lt;T&gt; TerminalOperation&lt;Stream&lt;T&gt;, Boolean&gt; createAllMatch(final Predicate&lt;? super T&gt; predicate) {
<span class="nc" id="L200">        requireNonNull(predicate);</span>
<span class="nc" id="L201">        return new TestTerminalOperation&lt;&gt;(</span>
                TerminalOperationType.ALL_MATCH,
                Stream.class,
                boolean.class,
<span class="nc" id="L205">                stream -&gt; stream.allMatch(predicate),</span>
                predicate);
    }

    @Override
    public &lt;T&gt; TerminalOperation&lt;Stream&lt;T&gt;, Boolean&gt; createNoneMatch(final Predicate&lt;? super T&gt; predicate) {
<span class="nc" id="L211">        requireNonNull(predicate);</span>
<span class="nc" id="L212">        return new TestTerminalOperation&lt;&gt;(</span>
                TerminalOperationType.NONE_MATCH,
                Stream.class,
                boolean.class,
<span class="nc" id="L216">                stream -&gt; stream.noneMatch(predicate),</span>
                predicate);
    }

    @Override
    public &lt;T&gt; TerminalOperation&lt;Stream&lt;T&gt;, Optional&lt;T&gt;&gt; acquireFindFirst() {
<span class="nc" id="L222">        return typed(FIND_FIRST);</span>
    }

    @Override
    public &lt;T&gt; TerminalOperation&lt;Stream&lt;T&gt;, Optional&lt;T&gt;&gt; acquireFindAny() {
<span class="nc" id="L227">        return typed(FIND_ANY);</span>
    }

    @Override
    public &lt;T, S extends BaseStream&lt;T, S&gt;&gt; TerminalOperation&lt;S, Iterator&lt;T&gt;&gt; acquireIterator() {
<span class="nc" id="L232">        return typed(ITERATOR);</span>
    }

    @Override
    public &lt;T, S extends BaseStream&lt;T, S&gt;&gt; TerminalOperation&lt;S, Spliterator&lt;T&gt;&gt; acquireSpliterator() {
<span class="nc" id="L237">        return typed(SPLITERATOR);</span>
    }

    @SuppressWarnings(&quot;unchecked&quot;)
    private &lt;S extends BaseStream&lt;?, S&gt;, R&gt; TerminalOperation&lt;S, R&gt; typed(final TerminalOperation&lt;?, ?&gt; terminalOperation) {
<span class="nc" id="L242">        return (TerminalOperation&lt;S, R&gt;) terminalOperation;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>